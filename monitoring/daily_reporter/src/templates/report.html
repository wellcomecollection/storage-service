<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Storage service report for {{ today.strftime("%-d %B %Y") }}</title>

    <style>
      body {
        font: 12pt 'Helvetica Neue', Helvetica, Arial, sans-serif;
        color: #121212;
        line-height: 1.5;
        margin: 0;
        margin-bottom: 3em;
      }

      footer {
        margin-top: 4em;
        border-top: 1px solid #ccc;
        font-size: small;
        color: #999;
        padding-top: 10px;
      }

      div.content {
        max-width: 1000px;
        margin-left:  auto;
        margin-right: auto;
        padding-left:  1em;
        padding-right: 1em;
      }

      @font-face {
        /* The Wellcome font, run through https://transfonter.org */
        /* It was base64 encoded and trimmed to the charcters ADFJMNOSabcefghilmnoprstuvy --
           the only ones we'd ever use in the title of this report. */
        font-family: Wellcome;
        src: url('data:application/font-woff2;charset=utf-8;base64,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') format('woff2'),
             url('data:application/font-woff;charset=utf-8;base64,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') format('woff');
      }

      aside {
        background-color: #FEC200;  /* runny yolk */
        font: 18pt Wellcome, sans-serif;
        padding-top:    0.5em;
        padding-bottom: 0.5em;
        border-bottom: 5px solid black;
        margin-bottom: 1em;
      }

      a:hover {
        text-decoration: none;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-left: -14px;
      }

      h1, h3, .no_activity {
        margin-left: 14px;
      }

      .no_activity {
        padding-left: 14px;
      }

      tr.status-succeeded td:first-child {
        border-left: 6px solid #4C8026;  /* sherwood 2 */
        padding-left: 14px;
      }

      tr.status-processing td:first-child {
        border-left: 6px solid #009BB2;  /* bora bora */
        padding-left: 14px;
      }

      tr.status-failed td:first-child {
        border-left: 6px solid #E10F2D;  /* brogues 3 */
        padding-left: 14px;
      }

      tr.status-accepted td:first-child {
        border-left: 6px solid #FEC200;  /* runny yolk */
        padding-left: 14px;
      }

      .status-succeeded a {
        color: #4C8026;  /* sherwood 2 */
      }

      .status-processing a {
        color: #009BB2;  /* bora bora */
      }

      .status-failed a {
        color: #E10F2D;  /* brogues 3 */
      }

      .status-accepted a {
        color: #cc9c00;  /* runny yolk */
      }

      h1, h3 {
        margin-bottom: 5px;
      }

      th {
        text-align: left;
      }

      td {
        padding: 3px;
        vertical-align: top;
      }

      td.ingest_id {
        font-family: monospace;

      }

      .last_event td {
        padding-left: 2.5em !important;
        font-size: 90%;
        padding-bottom: 1em;
        line-height: 1.5em;
      }
    </style>
  </head>

  <body>
    <aside>
      <div class="content">
        Storage service report for {{ today.strftime("%-d %B %Y") }}
      </div>
    </aside>
    <main>
      <div class="content">
        <p>
          Here's everything that happened recently in the storage service.
          {% if not found_everything %}
            Elasticsearch can only return the first 10,000 results.
            There may be ingests missing from this report.
          {% endif %}
        </p>

        {% if not ingests_by_status %}
          <p>No activity!</p>
        {% endif %}

        <table>
          {% for label in ["prod", "staging"] %}
            <tr>
              <th colspan="3"><h1>{{ label }}</h1></th>
            </tr>
            {% if ingests_by_status.get(label, {}) %}
              {% for classification in [
                "failed (unknown reason)",
                "stalled",
                "failed (user error)",
                "failed (known error)",
                "accepted",
                "processing",
                "succeeded"
              ] %}
                {% if ingests_by_status[label].get(classification) %}
                  <tr><td colspan="3"><h3>{{ classification }}</h3></td></tr>
                  {% for ingest in ingests_by_status[label].get(classification) | sort(attribute="lastModifiedDate", reverse=True) %}
                  <tr class="status-{{ ingest.status }}">
                    <td class="ingest_id">
                      <a href="https://wellcome-ingest-inspector.glitch.me/ingests/{{ ingest.id }}">{{ ingest.id }}</a></td>
                    <td>{{ ingest.space }}</td>
                    <td>{{ ingest.externalIdentifier }}</td>
                    <td>{{ ingest.version or "(no version)" }}</td>
                    <td title="{{ ingest.lastModifiedDate }}">{{ ingest.lastModifiedDate | pretty_date }}</td>
                  </tr>

                  {% set last_event = ingest|last_event %}
                  {% if last_event and ingest.status != 'succeeded' %}
                  <tr class="status-{{ ingest.status }} last_event">
                    <td colspan="5" {% if loop.last %}style="padding-bottom: 3px"{% endif %}>
                      Last event: {{ last_event.description|add_s3_uri|safe }}<br/>
                      <span title="{{ last_event.createdDate }}">{{ last_event.createdDate | pretty_date }}</span>
                    </td>
                  </tr>
                  {% endif %}

                  {% endfor %}
                {% endif %}
              {% endfor %}
            {% else %}
              <tr><td class="no_activity">No activity!</td></tr>
            {% endif %}
          {% endfor %}
        </table>
      </div>
    </main>
    <footer>
      <div class="content">
        Report generated at {{ now.isoformat() }}
      </div>
    </footer>
  </body>
</html>
